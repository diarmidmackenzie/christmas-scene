<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Winter Wonderland Christmas Playground - Snowball Testing</title>
    <meta name="description" content="Merry Christmas 2021!">
    {% include "scripts.html" %}
    <script src="../../bundle.js"></script>
    <script>
      AFRAME.registerComponent('spawn-snowball-on-space', {
        init() {
          const spawnerEl = document.querySelector('[snowball-generator]')
          
          window.addEventListener('keydown', (e) => {
            if (e.key === " ") {
              spawnerEl.components['snowball-generator'].createSnowball()
            }
          })
        }
      })
    </script>
  </head>
  <body>
    <a-scene networking
             physics="driver: ammo"
             spawn-snowball-on-space>
      <a-assets>
        {% include "templates.html" %}
        {% include "test-assets.html" %}
        {% include "mixins.html" %}
      </a-assets>
      {% include "environment.html" %}
      {% include "rig.html" %}
      <a-entity id="play-area">
        {% include "layout/floor.html" %}
      </a-entity>
    </a-scene>
    <script>

      // Called by Networked-Aframe when connected to server
      function onConnect() {
        console.log('onConnect', new Date());
        NAF.connection.adapter.enableMicrophone(true)
      }
    </script>
  </body>
</html>